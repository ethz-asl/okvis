<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>OKVIS: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OKVIS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Welcome to OKVIS: Open Keyframe-based Visual-Inertial SLAM.</p>
<p>This is the Author's implementation of the [1] and [3] with more results in [2].</p>
<p>[1] Stefan Leutenegger, Simon Lynen, Michael Bosse, Roland Siegwart and Paul Timothy Furgale. Keyframe-based visualâ€“inertial odometry using nonlinear optimization. The International Journal of Robotics Research, 2015.</p>
<p>[2] Stefan Leutenegger. Unmanned Solar Airplanes: Design and Algorithms for Efficient and Robust Autonomous Operation. Doctoral dissertation, 2014.</p>
<p>[3] Stefan Leutenegger, Paul Timothy Furgale, Vincent Rabaud, Margarita Chli, Kurt Konolige, Roland Siegwart. Keyframe-Based Visual-Inertial SLAM using Nonlinear Optimization. In Proceedings of Robotics: Science and Systems, 2013.</p>
<p>Note that the codebase that you are provided here is free of charge and without any warranty. This is bleeding edge research software.</p>
<p>Also note that the quaternion standard has been adapted to match Eigen/ROS, thus some related mathematical description in [1,2,3] will not match the implementation here.</p>
<p>If you publish work that relates to this software, please cite at least [1].</p>
<h3>License</h3>
<p>The 3-clause BSD license (see file LICENSE) applies.</p>
<h3>How do I get set up?</h3>
<p>This is a pure cmake project.</p>
<p>You will need to install the following dependencies,</p>
<ul>
<li>CMake, <pre class="fragment">  sudo apt-get install cmake
</pre></li>
<li>google-glog + gflags, <pre class="fragment">  sudo apt-get install libgoogle-glog-dev
</pre></li>
<li>BLAS &amp; LAPACK, <pre class="fragment">  sudo apt-get install libatlas-base-dev
</pre></li>
<li>Eigen3, <pre class="fragment">  sudo apt-get install libeigen3-dev
</pre></li>
<li>SuiteSparse and CXSparse, <pre class="fragment">  sudo apt-get install libsuitesparse-dev
</pre></li>
<li>Boost, <pre class="fragment">  sudo apt-get install libboost-dev libboost-filesystem-dev
</pre></li>
<li>OpenCV 2.4-3.0: follow the instructions on <a href="http://opencv.org/">http://opencv.org/</a> or install via <pre class="fragment">  sudo apt-get install libopencv-dev
</pre></li>
<li>Optional: use the the package with the Skybotix VI sensor. Note that this requires a system install, not just as ROS package. Also note that Skybotix OSX support is experimental (checkout the feature/osx branch). <pre class="fragment">  git clone https://github.com/ethz-asl/libvisensor.git
  cd libvisensor
  ./install_libvisensor.sh
</pre></li>
</ul>
<p>then download and expand the archive: </p>
<pre class="fragment">wget https://www.doc.ic.ac.uk/~sleutene/software/okvis-1.1.2.zip
unzip okvis-1.1.2.zip &amp;&amp; rm okvis-1.1.2.zip
</pre><p>Or, if you were given bitbucket access, clone the repository: </p>
<pre class="fragment">git clone git@github.com:ethz-asl/okvis.git
</pre><p>or </p>
<pre class="fragment">git clone https://github.com/ethz-asl/okvis.git
</pre><h3>Building the project</h3>
<p>To change the cmake build type for the whole project use: </p>
<pre class="fragment">mkdir build &amp;&amp; cd build
cmake -DCMAKE_BUILD_TYPE=Release ..
make -j8
</pre><p>NOTE: if you want to use the library, install the project (default or somewhere else), so the dependencies can be resolved. </p>
<pre class="fragment">make install
</pre><h3>Running the demo application</h3>
<p>You will find a demo application in okvis_apps. It can process datasets in the ASL/ETH format.</p>
<p>In order to run a minimal working example, follow the steps below:</p>
<ol type="1">
<li>Download a dataset of your choice from <a href="http://projects.asl.ethz.ch/datasets/doku.php?id=kmavvisualinertialdatasets">http://projects.asl.ethz.ch/datasets/doku.php?id=kmavvisualinertialdatasets</a>. Assuming you downloaded MH_01_easy/. You will find a corresponding calibration / estimator configuration in the config folder.</li>
<li>Run the app as <pre class="fragment"> ./okvis_app_synchronous path/to/okvis/config/config_fpga_p2_euroc.yaml path/to/MH_01_easy/mav0/
</pre></li>
</ol>
<h3>Outputs and frames</h3>
<p>In terms of coordinate frames and notation,</p>
<ul>
<li>W denotes the OKVIS World frame (z up),</li>
<li>C_i denotes the i-th camera frame</li>
<li>S denotes the IMU sensor frame</li>
<li>B denotes a (user-specified) body frame.</li>
</ul>
<p>The output of the okvis library is the pose T_WS as a position r_WS and quaternion q_WS, followed by the velocity in World frame v_W and gyro biases (b_g) as well as accelerometer biases (b_a). See the example application to get an idea on how to use the estimator and its outputs (callbacks returning states).</p>
<h3>Configuration files</h3>
<p>The config folder contains example configuration files. Please read the documentation of the individual parameters in the yaml file carefully. You have various options to trade-off accuracy and computational expense as well as to enable online calibration.</p>
<h3>HEALTH WARNING: calibration</h3>
<p>If you would like to run the software/library on your own hardware setup, be aware that good results (or results at all) may only be obtained with appropriate calibration of the</p>
<ul>
<li>camera intrinsics,</li>
<li>camera extrinsics (poses relative to the IMU),</li>
<li>knowledge about the IMU noise parameters,</li>
<li>and ACCURATE TIME SYNCHRONISATION OF ALL SENSORS.</li>
</ul>
<p>To perform a calibration yourself, we recommend the following:</p>
<ul>
<li>Get Kalibr by following the instructions here <a href="https://github.com/ethz-asl/kalibr/wiki/installation">https://github.com/ethz-asl/kalibr/wiki/installation</a> . If you decide to build from source and you run ROS indigo checkout pull request 3: <pre class="fragment">  git fetch origin pull/3/head:request3
  git checkout request3
</pre></li>
<li>Follow <a href="https://github.com/ethz-asl/kalibr/wiki/multiple-camera-calibration">https://github.com/ethz-asl/kalibr/wiki/multiple-camera-calibration</a> to calibrate intrinsic and extrinsic parameters of the cameras. If you receive an error message that the tool was unable to make an initial guess on focal length, make sure that your recorded dataset contains frames that have the whole calibration target in view.</li>
<li>Follow <a href="https://github.com/ethz-asl/kalibr/wiki/camera-imu-calibration">https://github.com/ethz-asl/kalibr/wiki/camera-imu-calibration</a> to get estimates for the spatial parameters of the cameras with respect to the IMU.</li>
</ul>
<h3>Using the library</h3>
<p>Here's a minimal example of your CMakeLists.txt to build a project using OKVIS. </p>
<pre class="fragment">cmake_minimum_required(VERSION 2.8)

set(OKVIS_INSTALLATION &lt;path/to/install&gt;) # point to installation

# require OpenCV
find_package( OpenCV COMPONENTS core highgui imgproc features2d REQUIRED )
include_directories(BEFORE ${OpenCV_INCLUDE_DIRS}) 

# require okvis
find_package( okvis 1.1 REQUIRED)
include_directories(${OKVIS_INCLUDE_DIRS})

# require brisk
find_package( brisk 2 REQUIRED)
include_directories(${BRISK_INCLUDE_DIRS})

# require ceres
list(APPEND CMAKE_PREFIX_PATH ${OKVIS_INSTALLATION})
find_package( Ceres REQUIRED )
include_directories(${CERES_INCLUDE_DIRS}) 

# require OpenGV
find_package(opengv REQUIRED)

# VISensor, if available
list(APPEND CMAKE_MODULE_PATH ${OKVIS_INSTALLATION}/lib/CMake)
find_package(VISensor)
if(VISENSORDRIVER_FOUND)
  message(STATUS "Found libvisensor.")
else()
  message(STATUS "libvisensor not found")
endif()

# now continue with your project-specific stuff...
</pre><h3>Contribution guidelines</h3>
<ul>
<li>Contact <a href="#" onclick="location.href='mai'+'lto:'+'s.l'+'eu'+'ten'+'eg'+'ger'+'@i'+'mpe'+'ri'+'al.'+'ac'+'.uk'; return false;">s.leu<span style="display: none;">.nosp@m.</span>tene<span style="display: none;">.nosp@m.</span>gger@<span style="display: none;">.nosp@m.</span>impe<span style="display: none;">.nosp@m.</span>rial.<span style="display: none;">.nosp@m.</span>ac.u<span style="display: none;">.nosp@m.</span>k</a> to request access to the bitbucket repository.</li>
<li>Programming guidelines: please follow <a href="https://github.com/ethz-asl/programming_guidelines/wiki/Cpp-Coding-Style-Guidelines">https://github.com/ethz-asl/programming_guidelines/wiki/Cpp-Coding-Style-Guidelines</a> .</li>
<li>Writing tests: please write unit tests (gtest).</li>
<li>Code review: please create a pull request for all changes proposed. The pull request will be reviewed by an admin before merging.</li>
</ul>
<h3>Support</h3>
<p>The developpers will be happy to assist you or to consider bug reports / feature requests. But questions that can be answered reading this document will be ignored. Please contact <a href="#" onclick="location.href='mai'+'lto:'+'s.l'+'eu'+'ten'+'eg'+'ger'+'@i'+'mpe'+'ri'+'al.'+'ac'+'.uk'; return false;">s.leu<span style="display: none;">.nosp@m.</span>tene<span style="display: none;">.nosp@m.</span>gger@<span style="display: none;">.nosp@m.</span>impe<span style="display: none;">.nosp@m.</span>rial.<span style="display: none;">.nosp@m.</span>ac.u<span style="display: none;">.nosp@m.</span>k</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jul 22 2016 15:55:39 for OKVIS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
